(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{3506:function(e,t,r){Promise.resolve().then(r.bind(r,8087))},6648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var o=r(5601),n=r.n(o)},5601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let o=r(9920),n=r(497),s=r(8173),a=o._(r(1241));function i(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=s.Image},8087:function(e,t,r){"use strict";r.r(t);var o=r(7437),n=r(7724),s=r(6648),a=r(2265);t.default=function(){let[e,t]=(0,a.useState)(),[r,i]=(0,a.useState)();return(0,a.useEffect)(()=>{window.localStorage&&i(JSON.parse(localStorage.getItem("userSession")))},[]),(0,a.useEffect)(()=>{async function e(){try{let e=await (0,n.A)(null==r?void 0:r.token);t(e)}catch(e){throw Error(e)}}r&&e()},[r]),(0,o.jsxs)("div",{className:"container mx-auto py-8",children:[(0,o.jsx)("h1",{className:"text-5xl font-bold mb-8",children:"Mis Compras"}),(0,o.jsx)("div",{className:" shadow-md rounded-lg p-4 flex mb-4 flex-wrap flex-row justify-center gap-8",children:(null==e?void 0:e.length)>0?null==e?void 0:e.map(e=>(0,o.jsxs)("div",{className:"bg-yellow-100 shadow-md rounded-lg p-6 justify-center hover:shadow-2xl hover:bg-orangeBase",children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold mb-2",children:["Orden #",e.id]}),(0,o.jsxs)("p",{className:" text-gray-500 ",children:["Status:"," ",(0,o.jsxs)("span",{className:" text-green-500",children:[" ",e.status," "]})]}),(0,o.jsxs)("p",{className:"text-gray-600",children:["Fecha: ",new Date(e.date).toLocaleString()]}),(0,o.jsx)("div",{className:"flex mt-4 flex-wrap flex-row",children:e.products.map(e=>(0,o.jsxs)("div",{className:"flex items-center mr-4 flex-col",children:[(0,o.jsx)(s.default,{src:e.image,alt:e.name,width:100,height:100,className:"rounded"}),(0,o.jsx)("p",{className:"ml-2 font-semibold",children:e.name})]},e.id))})]},e.id)):(0,o.jsx)("p",{children:"No hay \xf3rdenes disponibles."})})]})}},7724:function(e,t,r){"use strict";async function o(e,t){try{if(e.length){if(!t)throw Error("No token provided")}else throw Error("No products in the order");let r=await fetch("".concat("https://ecommerce-m4-back.onrender.com","/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:t,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({products:e})});if(!r.ok)throw Error("Failed to create order: ".concat(r.statusText));let o=await r.json(),n=localStorage.getItem("userData");if(n){let e=JSON.parse(n);e&&(e.orders.push(o),localStorage.setItem("userData",JSON.stringify(e)))}return o}catch(e){throw Error(e.message)}}async function n(e){try{if(!e)throw Error("No token provided");let t=await fetch("http://localhost:3001/users/orders",{method:"GET",headers:{"Content-Type":"application/json",Authorization:e}});if(!t.ok)throw Error("Failed to fetch orders");return t.json()}catch(e){throw Error(e)}}r.d(t,{A:function(){return n},L:function(){return o}})}},function(e){e.O(0,[173,971,23,744],function(){return e(e.s=3506)}),_N_E=e.O()}]);